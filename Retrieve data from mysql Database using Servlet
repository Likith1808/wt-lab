<%@ page import="java.sql.*" %>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Retrieve User Data</title>
</head>
<body>
    <form method="get">
        Enter User Id: <input type="text" name="id"><br>
        <input type="submit" value="Go">
    </form>

    <%
        String s = request.getParameter("id");

        if (s != null && !s.trim().equals("")) {
            int id = Integer.parseInt(s);
            Connection con = null;
            PreparedStatement ps = null;
            ResultSet rs = null;
            try {
                Class.forName("com.mysql.cj.jdbc.Driver");
                con = DriverManager.getConnection("jdbc:mysql://localhost:3306/user_db", "root", "Lalitha@123");
                ps = con.prepareStatement("SELECT * FROM user WHERE id = ?");
                ps.setInt(1, id);
                rs = ps.executeQuery();

                if (rs.next()) {
                    out.print("ID: " + rs.getInt("id") + "<br>");
                    out.print("Name: " + rs.getString("ename") + "<br>");
                    out.print("Salary: " + rs.getDouble("sal") + "<br>");
                } else {
                    out.print("No user found with ID: " + id);
                }
            } catch (Exception e) {
                e.printStackTrace();
                out.print("Error: " + e.getMessage());
            } finally {
                try {
                    if (rs != null) rs.close();
                    if (ps != null) ps.close();
                    if (con != null) con.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
        } else if (s != null) {
            out.print("Please enter an id");
        }
    %>
</body>
</html>
